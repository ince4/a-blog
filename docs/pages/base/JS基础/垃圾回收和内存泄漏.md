# 垃圾回收和内存泄漏

## 标记清除

标记阶段：从根对象（如全局对象、局部变量等）开始，通过可达性分析，标记所有可以被访问到的对象。
清除阶段：在标记阶段完成后，垃圾回收器会遍历整个内存空间，清除未被标记的对象。这些未被标记的对象被认为是不可达的，因此可以安全地释放它们所占用的内存。

## 引用计数
引擎有一张"引用表"，保存了内存里面所有的资源（通常是各种值）的引用次数。如果一个值的引用次数是0，就表示这个值不再用到了，因此可以将这块内存释放
如果一个值不再需要了，引用数却不为0，垃圾回收机制无法释放这块内存，从而导致内存泄漏

## 内存泄漏原因
意外的全局变量、未及时清除的定时器、对dom的引用、事件监听

## 检测内存泄漏
chrome开发工具 performance 观察heap的变化规律。内存快照找出导致泄漏的函数或变量，出现时间