# 【项目 稿】

## 自我介绍
面试官你好，我叫叶茂，21年杭州电子科技大学毕业之后进入携程工作，在携程火车票部门h5、小程序组做增长营销业务线的开发，主要负责抢票助力和一些营销活动相关的需求。开发中主要使用的技术栈是Vue和node，还有微信小程序。具有一定全栈开发的能力跟经验，

## 抢票助力流程
首先说一下需求背景，抢票助力是火车票一个比较重要的流量入口，让用户分享助力链接给好友。进入页面后会引导助力者去下载携程app、添加公众号、企微，提升一个流量的转化。

主要流程是：助力者进入助力页面，进行登陆和微信的网页授权流程，到用户uid、openId、unionId、订单号等信息进行绑定入库，之后会根据优先级和用户完成情况分流不同的助力方式，（下载助力、添加企微好友助力、添加微信好友助力、小程序一键助力）等不同流程。node端会监听事件的完成情况，发送奖励和企微/公众号欢迎语。

由于微信对诱导分享、关注行为有一些管控，有时候会受到微信的封禁影响。第一次被封的时候这个流程就没法走通了，节假日高峰400w的pv就都没了，只能调整分流切换流程。所以这之后我们一方面会做一个合规化的处理，另一方面也做了一些对策减小封禁的影响，大概有3点解决方案

>- 第一点：比如根据pv、uv、助力量配置监控和告警。然后还有个更有效的操作是node脚本实时监测封禁情况第一时间告警等方式。实现方式是通过抓包、查资料的方式发现微信打开链接时会先过一层安全检测，再根据检测结果来跳转相应的页面，因此我们就可以通过发送请求的方式来判断页面是否遭受封禁
>- 第二点：上面做的监控其实只能让我们在遭封禁后做一个时候的补救，还是保不住流量，通过node脚本自动生成链接并定期更换，分享入口会调用这个接口获取分享链接。这么做一个好处就是即使有一个链接被封了，其他下发的链接也不会受影响；另一个是脚本会自动生成并下发链接，不需要重新配置分享入口。
>- 第三点：如果微信封禁层级更高可能会影响其他项目，因此还单独配置了其他域名，放在微信平台

通过上面的方法，现在可以比较放心的放开h5助力流程的流量，也不用担心节假日处理不及时导致流程受阻了

## puppeteer
这个运营后台的功能是 运营同事那边批量导入素材进行发贴、管理评论、监控数据等

启动浏览器开一个新页面，跳转到目标页面，点击对应的元素、或者在输入框进行输入等。其中发帖的流程需要先根据URL把图片下载到本地，再进行上传。
登陆态会通过waitForNavigation()确保页面加载完成，根据url判断是否需要登陆。
登录是puppeteer进行登陆，接口获取验证码，登陆成功后写入登录态 redis保存

当时跟着文档实现了几个demo，下载图片上传、获取验证码写入登陆态之类的，

## 难点

## 优化
FP 
FCP（First Contentful Paint）：首次内容绘制时间
LCP（Largest Contentful Paint）：最大内容绘制时间，用于记录视窗内最大的元素绘制的时间
TTI 可交互时间
CLS（Cumulative Layout Shift）：累计位移偏移

h5 平日pv百万 uv 三四万 三倍
小程序 平日2000万pv 800万uv
但是因为这两个页面会受到流量、开关、封禁情况的影响，所以变动会大一些
<!-- preload、lottie、静态、优先加载、本地存储、懒加载 -->

用（babel-loader） include 或 exclude 来帮我们避免不必要的转译。node_modules
DllPlugin 处理第三方库（node_modules），这个依赖库不会跟着你的业务代码一起被重新打包，只有当依赖自身发生版本变化时才会重新打包
Happypack——将 loader 由单进程转为多进程；treeshaking删除冗余代码
gzip

对图片进行优化，小图片使用base64，雪碧图等方式。使用压缩性能更好的webp等（服务端accept字段进行判断、加载webp尝试获取宽高）。
提前设置图片宽高、动态元素预留控件，减少回流重绘，体现在指标上也就是cls
lottie 动画设置静态 背景图，监听到加载完成的事件后再换成动画
spider-font
vue组件异步加载、路由懒加载

重要图片预加载，link标签的rel="preload"或者js Image对象
延迟、按需加载
优化长任务（WebWorker、requestIdlecallback、防抖节流）
lighthouse建议
性能监控

图片方面：小图片使用base64，雪碧图等方式；使用压缩性能更好的webp格式同时做好降级方案；spider-font进行字体压缩

webpack构建方面：exclude限定loader范围；DllPlugin把第三方库单独打包，只有依赖自身变化的时候重新打包；使用happypack或者thread-loader开启多进程并发打包；

使用本地存储、懒加载、异步加载、减少回流重绘（集中dom操作、）
## vue优化


## git冲突解决
rebase 变基，线性、无分叉，还可以整理commit，合并一些无意义的commit

## 未来规划
首先完善丰富一下自己的技术栈，去学习掌握流行的一些技术或者框架等
然后通过实践、阅读源码等方式提升一下深度
积累到达一定程度后希望未来向前端负责人的方向发展

## 为什么离职
业务上过于稳定，没有什么新的点，技术栈上也比较老旧，希望到一个新的环境可能更有利于自己的成长。

## 优点
比较认真负责，对于项目遇到的问题都会主动推进、及时沟通交流

## 缺点
技术栈还有所欠缺。比如typescript这些，未来希望持续提升知识的广度、深度，并把学到的知识用到实践中去

## 兴趣爱好
绘画和外语。
以前中学的时候喜欢看些动画片、游戏。大学的时候正好为了学分报了外语课，就以这个为契机学习了下去，也考了级。
绘画就是小时候的觉得会画画的人很酷，但是因为住校等原因没有去学，后来大学买了数位板

## 反问
想请问一下团队的规模；技术栈
我面试的这个岗位主要会面对什么挑战、承担什么职责
这个发布的周期大概是怎么样的
这个岗位的成果是怎么评价的，哪些比较重要
团队氛围怎么样